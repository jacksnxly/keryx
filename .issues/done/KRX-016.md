---
id: "KRX-016"
title: "Remove dead code and unused error variants"
type: improvement
status: done
priority: low
labels: [code-quality, dead-code]
created: "2026-01-25"
updated: "2026-01-25"
assignee: null
---

# Remove dead code and unused error variants

## Context
The codebase contains several unused items that should be cleaned up to reduce maintenance burden.

## Current Implementation
Unused items identified:

**Test utilities (tests/common/mod.rs):**
- `changelog_fixture` (line 11)
- `response_fixture` (line 16)
- `temp_test_dir` (line 27)

**Error variants:**
- `GitError::NotARepository`
- `GitError::NoTagsFound`
- `GitError::InvalidRange`
- Other unused variants

**Functions:**
- `is_github_auth_available()` - never called

**Empty test modules:**
- `src/claude/subprocess.rs:59-62`
- `src/git/range.rs:95-99`

## Proposed Improvement
Remove all unused items or add `#[allow(dead_code)]` with justification for items kept intentionally.

## Acceptance Criteria
- [x] All unused test utilities removed or used
- [x] Unused error variants removed
- [x] `is_github_auth_available()` removed or used
- [x] Empty test modules either filled or removed
- [x] `cargo build` produces no dead_code warnings
- [x] Functionality unchanged

## Technical Notes
**Files affected:**
- `tests/common/mod.rs`
- `src/error.rs`
- `src/github/auth.rs`
- `src/claude/subprocess.rs`
- `src/git/range.rs`

Run `cargo build 2>&1 | grep "never used"` to find all instances.

---

## Resolution

**Completed:** 2026-01-25

### Approach
Cleaned up dead code by removing unused items and adding module-level `#[allow(dead_code)]` for shared test utilities that are intentionally kept for cross-test usage.

### Changes Made
- `tests/common/mod.rs`: Added `#![allow(dead_code)]` module attribute with documentation explaining these are shared utilities not all used by every test file
- `src/error.rs`: Removed unused `GitError` variants: `NotARepository`, `NoTagsFound`, `InvalidRange`
- `src/github/auth.rs`: Removed unused `is_github_auth_available()` function
- `src/claude/subprocess.rs`: Removed empty test module
- `src/git/range.rs`: Removed empty test module

### Testing
- [x] Build passes (`cargo check --all-targets`)
- [x] All 135 tests pass (69 unit + 66 integration)
- [x] No dead_code warnings

---
*Solved by Claude Code*
