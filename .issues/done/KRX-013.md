---
id: "KRX-013"
title: "Fix misleading auth order documentation"
type: bug
status: done
priority: low
labels: [documentation, comment-rot]
created: "2026-01-25"
updated: "2026-01-25"
assignee: null
---

# Fix misleading auth order documentation

## Problem
The module-level comment and function doc comment disagree about which `gh` command is used for authentication.

## Current Behavior
Module comment at `src/github/auth.rs:3-6`:
```rust
//! Priority order:
//! 1. `gh auth status` ...
```

Function comment at `src/github/auth.rs:14-18`:
```rust
/// 1. `gh auth token` ...
```

The code actually uses **both**: `gh auth status` to verify auth, then `gh auth token` to get the value.

## Expected Behavior
Documentation should clearly explain the two-step process.

## Acceptance Criteria
- [x] Module comment accurately describes the process
- [x] Function comment matches module comment
- [x] Explanation is clear for users debugging auth issues

## Technical Notes
**File:** `src/github/auth.rs:3-6`

Suggested fix:
```rust
//! Priority order:
//! 1. gh CLI auth (verified via `gh auth status`, token retrieved via `gh auth token`)
//! 2. GITHUB_TOKEN environment variable
//! 3. GH_TOKEN environment variable
```

---

## Resolution

**Completed:** 2026-01-25

### Approach
Updated both the module-level doc comment and the `get_github_token()` function doc comment to clearly explain the two-step gh CLI authentication process.

### Changes Made
- `src/github/auth.rs:3-6`: Updated module doc comment to describe "gh CLI auth (verified via `gh auth status`, token retrieved via `gh auth token`)"
- `src/github/auth.rs:14-18`: Updated function doc comment to match the module comment

### Testing
- [x] Build passes (`cargo check`)
- [x] No runtime impact (documentation-only change)

---
*Solved by Claude Code*
