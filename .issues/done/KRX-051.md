# [KRX-051] Warn user when --no-verify is silently ignored for --from-history

**Type:** bug
**Priority:** high
**Status:** in-review
**Labels:** ux, silent-failure
**Created:** 2026-01-26
**Updated:** 2026-01-27
**Branch:** feat/agentic-verification

---

## Problem

The `run_init_from_history` function accepts `--no-verify` and `--verbose` flags but silently ignores them. Users may expect verification to occur when it doesn't.

## Current Behavior

```rust
async fn run_init_from_history(
    // ...
    _no_verify: bool,   // Prefixed with _ = ignored!
    _verbose: bool,
) -> Result<()> {
```

The function signature accepts these parameters but they're unused. The only indication is a code comment:
```rust
/// Note: Verification is not yet implemented for this path as it processes
/// multiple versions. The regular `keryx` command includes verification.
```

Users running `keryx init --from-history` have no idea verification isn't happening.

## Expected Behavior

Either:
1. Implement verification for `--from-history` path, OR
2. Print a warning when using `--from-history` without `--no-verify`:
   ```
   Note: Verification is not supported for --from-history; entries are unverified.
   Use --no-verify to suppress this warning.
   ```

## Acceptance Criteria

- [x] User is informed when verification doesn't happen
- [x] Warning only shows if `--no-verify` was NOT specified (they didn't opt out)
- [x] Warning is clear about why and what the implications are

## Technical Notes

**Location:** `src/main.rs:440-452`

**Quick fix (option 2):**
```rust
async fn run_init_from_history(
    // ...
    no_verify: bool,  // Remove underscore
    _verbose: bool,
) -> Result<()> {
    if !no_verify {
        eprintln!(
            "\x1b[33mâš  Note: Verification is not yet supported for --from-history.\n  \
             Entries will be unverified. Use --no-verify to suppress this warning.\x1b[0m"
        );
    }
    // ... rest of function
```

---

## Resolution

**Completed:** 2026-01-27

### Approach
Implemented option 2: Added a warning message that displays when `--from-history` is used without `--no-verify`. This informs users that verification is not available for this code path.

### Changes Made
- `src/main.rs:451-459`: Removed underscore prefix from `no_verify` parameter and added warning check at start of function

### Testing
- [x] Build passes (`cargo build`)
- [x] All tests pass (`cargo test`)
- [x] Clippy passes (no new warnings)
- [ ] Manual testing required

---
*Solved by Claude Code*
